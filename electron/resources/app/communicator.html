<!DOCTYPE html>
<html>
<head>

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="styles.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>

<body>
	<div id="searchbox">
	<input type="text" placeholder="search" class="text" id="searchbar">
	<hr>
	</div>
	<div class="contacts" id="contacts">
	</div>

	<div id="profile">
		profpic
	</div>
	<div id="settings">
		<a href="settings.html"><img id="hentaispinner" src="pics/hentaispinner.png"></a>
	</div>

	<div id="chat">
	</div>

	<div class="send_div">
	<textarea type="text" placeholder="your message" class="text" id="message"></textarea>
	<button id="sendBtn">Send</button>
	</div>
	<script>
	function addBtn(text) {
	var element = document.createElement("button");
	element.value = text;
	element.className = "contact";
	element.onclick = function() {
		alert("blabla");
	};

	var foo = document.getElementById("contacts");
	foo.appendChild(element);
	}

	document.getElementById("sendBtn").onclick = function() {
	addBtn("xD");
	};
	
	function addMsg(text) {
	var element = document.createElement("p");
	var chat = document.getElementById("chat");
	element.innerHTML = text;
	element.className = ("msg");
	if (chat.lastChild.className === "msg" || chat.lastChild.className === "msg connectUp") {
		element.classList.add("connectUp");
		chat.lastChild.classList.add("connectDown");
	}

	chat.appendChild(element);
	}
	
	function addMsg2(text) {
	var element = document.createElement("p");
	var chat = document.getElementById("chat");
	element.innerHTML = text;
	element.className = "msg2";
	if (chat.lastChild.className === "msg2" || chat.lastChild.className === "msg2 connectUp") {
		element.classList.add("connectUp2");
		chat.lastChild.classList.add("connectDown2");
	}

	
	chat.appendChild(element);
	}

	var input = document.getElementById("message");
	input.addEventListener("keyup", function(event) {
	if(event.keyCode == 13 && !event.shiftKey){
		if (/\S/.test(document.getElementById("message").value)){
			addMsg(document.getElementById("message").value);
			document.getElementById("message").style.height = "46px";
			document.querySelector(".send_div").style.height = "61px";
			document.getElementById("chat").scrollTo(0,document.querySelector("#chat").scrollHeight);
			document.getElementById("message").value = "";
		}
	  }
	});
	
	var textarea = document.querySelector('textarea');
	var send_div = document.querySelector('.send_div');

	textarea.addEventListener('keydown', autosize);
	send_div.addEventListener('keydown', autosize);
             
	function autosize(){
		var el = this;
		setTimeout(function(){
		el.style.cssText = 'height:auto; padding:0';
		el.style.cssText = 'height:' + el.scrollHeight + 'px';
		},0);
}
	
	$('button', ".contacts").on('click', function(){
    $('button', ".contacts").not(this).removeClass('selected');
	if ($(this).hasClass('selected')) { $(this).removeClass('selected')}
	else { $(this).addClass('selected')}
	});
	
	
	

	</script>
</body>
</html>
